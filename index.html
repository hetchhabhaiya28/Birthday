<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Happy Birthday My Love ❤️</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Montserrat:wght@400;600&family=Pacifico&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        :root {
            --primary: #ff3e78;
            --secondary: #ff86a0;
            --accent: #ff1f59;
            --text: #33001b;
            --light: #fff;
            --shadow: 0 5px 20px rgba(255, 31, 90, 0.15);
            --transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            background: linear-gradient(135deg, #fff0f3 0%, #ffe6ee 100%);
            color: var(--text);
            overflow-x: hidden;
            line-height: 1.6;
            background-image: url('https://www.transparenttextures.com/patterns/hearts.png');
            background-attachment: fixed;
        }

        /* Loading Screen */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.8s ease-out;
        }

        .loader {
            text-align: center;
            color: white;
            width: 90%;
            max-width: 300px;
        }

        .heart-pulse {
            position: relative;
            width: 100px;
            height: 100px;
            margin: 0 auto 20px;
        }

        .heart-shape {
            position: absolute;
            width: 100px;
            height: 90px;
            background-color: white;
            transform: rotate(-45deg);
            animation: heartbeat 1.5s infinite;
            top: 0;
            left: 0;
        }

        .heart-shape:before,
        .heart-shape:after {
            position: absolute;
            width: 100px;
            height: 90px;
            content: '';
            border-radius: 50%;
            background-color: white;
        }

        .heart-shape:before {
            top: -50px;
            left: 0;
        }

        .heart-shape:after {
            top: 0;
            left: 50px;
        }

        @keyframes heartbeat {
            0% { transform: scale(1); }
            15% { transform: scale(1.15); }
            30% { transform: scale(1); }
            45% { transform: scale(1.15); }
            60% { transform: scale(1); }
            100% { transform: scale(1); }
        }

        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 15px;
            opacity: 0;
            transition: opacity 0.8s ease-in;
        }

        /* Header */
        .header {
            text-align: center;
            padding: 20px 0;
            position: relative;
        }

        .title {
            font-family: 'Pacifico', cursive;
            font-size: clamp(2rem, 8vw, 3rem);
            color: var(--accent);
            margin-bottom: 5px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .date-badge {
            background: var(--primary);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            display: inline-block;
            margin-top: 10px;
            font-size: 0.9rem;
            box-shadow: var(--shadow);
        }

        /* Music Control */
        .music-control {
            position: absolute;
            top: 0;
            right: 0;
        }

        .music-control button {
            background: var(--primary);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        /* Hero Section */
        .hero-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 40px 0;
            margin-bottom: 40px;
            position: relative;
            overflow: hidden;
        }

        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, rgba(255, 62, 120, 0.1) 0%, transparent 70%);
            z-index: -1;
        }

        .cake-container {
            position: relative;
            margin-bottom: 30px;
            animation: float 5s infinite ease-in-out;
            filter: drop-shadow(0 10px 15px rgba(0, 0, 0, 0.1));
        }

        .cake {
            width: 200px;
            height: 120px;
            position: relative;
        }

        .base {
            width: 180px;
            height: 80px;
            background: linear-gradient(to bottom, #ff9bb2, #ff6686);
            border-radius: 10px;
            position: absolute;
            bottom: 0;
            left: 10px;
            box-shadow: var(--shadow);
        }

        .frosting {
            width: 200px;
            height: 30px;
            background: linear-gradient(to bottom, #fff6fa, #ffd6e7);
            border-radius: 50% 50% 0 0;
            position: absolute;
            top: 0;
            box-shadow: var(--shadow);
        }

        .candles {
            position: absolute;
            top: -40px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 15px;
        }

        .candles::before {
            content: '';
            width: 8px;
            height: 45px;
            background: linear-gradient(to right, #a5d6a7, #66bb6a);
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            border-radius: 4px;
        }

        .flame {
            width: 15px;
            height: 30px;
            background: linear-gradient(to top, #ffeb3b, #ff9800);
            border-radius: 50% 50% 20% 20%;
            position: relative;
            animation: flicker 2s infinite alternate;
            filter: blur(1px);
            box-shadow: 0 0 15px #ff9800, 0 0 30px rgba(255, 152, 0, 0.5);
        }

        @keyframes flicker {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.8; }
        }

        .make-wish-btn {
            background: linear-gradient(to right, var(--primary), var(--accent));
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 50px;
            font-size: 1rem;
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition);
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
            z-index: 1;
            margin-top: 20px;
        }

        .make-wish-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(to right, var(--accent), var(--primary));
            transition: var(--transition);
            z-index: -1;
        }

        .make-wish-btn:hover::before {
            left: 0;
        }

        .make-wish-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 31, 90, 0.3);
        }

        .make-wish-btn:active {
            transform: translateY(0);
            box-shadow: var(--shadow);
        }

        .hero-message {
            text-align: center;
            max-width: 600px;
            margin: 0 auto;
        }

        .typed-text {
            font-size: 1.3rem;
            color: var(--accent);
            font-family: 'Dancing Script', cursive;
            min-height: 70px;
        }

        /* Sections */
        section {
            margin-bottom: 40px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px 25px;
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(255, 71, 126, 0.2);
        }

        section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(to right, var(--primary), var(--accent));
        }

        section h2 {
            text-align: center;
            margin-bottom: 20px;
            font-family: 'Pacifico', cursive;
            color: var(--accent);
            font-size: clamp(1.8rem, 7vw, 2.2rem);
        }

        section h2 i {
            margin-right: 10px;
        }

        /* Timeline */
        .timeline {
            position: relative;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px 0;
        }

        .timeline::before {
            content: '';
            position: absolute;
            width: 4px;
            background: var(--primary);
            top: 0;
            bottom: 0;
            left: 20px;
            border-radius: 10px;
        }

        /* Make letter always open once clicked */
        .letter-envelope.open {
            transform: rotateY(180deg);
            pointer-events: none; /* Prevent closing by clicking again */
        }
        
        .letter-envelope.open .envelope-button {
            display: none; /* Remove the button when open */
        }
        
        .letter {
            position: absolute;
            width: 90%;
            height: 90%;
            background: #fff;
            border-radius: 15px;
            padding: 20px 15px;
            transform: rotateY(180deg);
            backface-visibility: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            display: block;
            border: 1px solid rgba(255, 71, 126, 0.2);
            z-index: 50;
        }

        /* Enhanced Timeline Animation */
        .timeline-item {
            padding: 0 0 0 40px;
            position: relative;
            margin-bottom: 25px;
            animation: fadeIn 1s ease forwards, slideInLeft 1.2s ease forwards;
            opacity: 0;
            transform: translateX(-20px);
        }

        .timeline-item::after {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            background: var(--light);
            border: 3px solid var(--primary);
            top: 15px;
            left: 11px;
            border-radius: 50%;
            z-index: 1;
        }
        
        @keyframes slideInLeft {
            to {
                transform: translateX(0);
            }
        }
        
        @keyframes fadeIn {
            to {
                opacity: 1;
            }
        }
        
        .timeline-item:nth-child(1) {
            animation-delay: 0.3s;
        }
        
        .timeline-item:nth-child(2) {
            animation-delay: 0.6s;
        }
        
        .timeline-item:nth-child(3) {
            animation-delay: 0.9s;
        }

        .timeline-content {
            padding: 20px;
            background: white;
            border-radius: 12px;
            box-shadow: var(--shadow);
            transition: var(--transition);
                transform: translateY(0);
                opacity: 1;
            animation: pulse 2s infinite ease-in-out;
            animation-delay: calc(var(--order) * 0.5s + 1s);
        }
        
        .timeline-content:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(255, 31, 90, 0.25);
        }
        
        @keyframes pulse {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .memory-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .memory-header i {
            color: var(--primary);
            margin-right: 10px;
            font-size: 1.2rem;
        }

        .timeline-content h3 {
            color: var(--primary);
            font-family: 'Dancing Script', cursive;
            font-size: 1.4rem;
        }

        .memory-date {
            font-size: 0.8rem;
            color: #777;
            margin-top: 8px;
            text-align: right;
        }

        /* Enhanced Gallery Section */
        .gallery-section {
            padding: 40px 20px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(255, 240, 243, 0.95));
            border-radius: 20px;
            box-shadow: var(--shadow);
            margin: 30px 0;
        }

        .gallery-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-top: 30px;
            padding: 15px;
        }

        .gallery-item {
            position: relative;
            overflow: hidden;
            border-radius: 15px;
            box-shadow: 0 10px 20px rgba(255, 31, 90, 0.15);
            aspect-ratio: 3/4;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            transform: translateY(0);
            border: 3px solid white;
        }

        .gallery-item:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(255, 31, 90, 0.25);
        }

        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .gallery-item:hover img {
            transform: scale(1.1);
        }

        /* Gallery item with caption only - no date */
        .overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(44, 0, 62, 0.9), transparent);
            color: white;
            padding: 20px 15px;
            transform: translateY(100%);
            transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            text-align: center;
        }

        .overlay-caption {
            font-family: 'Dancing Script', cursive;
            font-size: 1.3rem;
            margin-bottom: 5px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .gallery-item:hover .overlay {
            transform: translateY(0);
        }

        /* Enhanced Letter Section */
        .feelings-section {
            padding: 40px 20px;
            background: linear-gradient(to bottom right, rgba(255, 240, 245, 0.95), rgba(255, 228, 238, 0.95));
            border-radius: 20px;
            margin: 30px 0;
            box-shadow: 0 10px 30px rgba(255, 71, 126, 0.25);
            position: relative;
            overflow: hidden;
        }

        .feelings-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
            background: linear-gradient(to right, #ff477e, #ff1f5a);
            border-radius: 5px 5px 0 0;
        }

        .section-title {
            font-family: 'Dancing Script', cursive;
            font-size: 2.5rem;
            text-align: center;
            color: var(--accent);
            margin-bottom: 30px;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
        }

        .letter-container {
            position: relative;
            max-width: 500px;
            margin: 0 auto;
            perspective: 1500px;
            padding-bottom: 40px;
        }

        .letter-envelope {
            position: relative;
            width: 100%;
            height: 300px;
            transform-style: preserve-3d;
            transition: transform 1s ease;
            margin-bottom: 20px;
            z-index: 10;
        }

        .envelope-button {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: transparent;
            border: none;
            cursor: pointer;
            z-index: 100;
            -webkit-tap-highlight-color: transparent;
            outline: none;
        }

        .envelope {
            position: absolute;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #ff6491, #ff2d63);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            transform-style: preserve-3d;
            box-shadow: 0 10px 25px rgba(255, 71, 126, 0.4);
            backface-visibility: hidden;
            overflow: hidden;
            z-index: 1;
        }

        .envelope::before {
            content: '';
            position: absolute;
            width: 80%;
            height: 1px;
            background: rgba(255, 255, 255, 0.5);
            top: 50%;
            left: 10%;
        }

        .envelope::after {
            content: '❤️';
            position: absolute;
            font-size: 2rem;
            color: white;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
        }

        .envelope-flap {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 50%;
            background: linear-gradient(160deg, #ff7ba3, #ff3d6e);
            clip-path: polygon(0 0, 50% 100%, 100% 0);
            transform-origin: top;
            z-index: 2;
            transition: transform 0.6s ease-out 0.4s;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
        }

        .letter-envelope.open .envelope-flap {
            transform: rotateX(180deg);
        }

        .letter {
            position: absolute;
            width: 90%;
            height: 90%;
            background: #fff;
            border-radius: 15px;
            padding: 20px 15px;
            transform: rotateY(180deg);
            backface-visibility: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            display: block;
            border: 1px solid rgba(255, 71, 126, 0.2);
            z-index: 50;
        }

        /* Improved letter scrolling functionality */
        .letter-content {
            width: 100%;
            height: 100%;
            padding: 10px 5px;
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: rgba(255, 62, 120, 0.3) rgba(255, 62, 120, 0.1);
            -webkit-overflow-scrolling: touch;
            position: relative;
            z-index: 60;
            touch-action: pan-y;
            -ms-overflow-style: none; /* IE and Edge */
        }
        
        .letter-content::-webkit-scrollbar {
            width: 6px;
        }
        
        .letter-content::-webkit-scrollbar-track {
            background: rgba(255, 62, 120, 0.1);
            border-radius: 10px;
        }
        
        .letter-content::-webkit-scrollbar-thumb {
            background: rgba(255, 62, 120, 0.3);
            border-radius: 10px;
        }
        
        .letter-content::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 62, 120, 0.5);
        }
        
        .envelope.open .letter-content {
            pointer-events: auto;
            overflow-y: auto !important;
            max-height: 100%;
        }

        .letter-content h2 {
            font-family: 'Dancing Script', cursive;
            font-size: 2rem;
            color: #ff3e78;
            margin-bottom: 25px;
            text-align: center;
            text-shadow: 0 1px 1px rgba(0,0,0,0.05);
            line-height: 1.3;
        }

        .letter-content p {
            font-size: 1.1rem;
            line-height: 1.8;
            color: #33001b;
            margin-bottom: 20px;
            text-align: left;
            font-family: 'Montserrat', sans-serif;
            letter-spacing: 0.01em;
        }

        .letter::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 30px;
            background: linear-gradient(to top, rgba(255, 255, 255, 1) 0%, rgba(255, 255, 255, 0) 100%);
            pointer-events: none;
            z-index: 1;
        }

        .letter-content p.extra-content {
            font-style: italic;
            color: #ff3e78;
            margin-top: 10px;
            font-weight: 500;
        }

        .signature {
            font-family: 'Dancing Script', cursive;
            font-size: 1.8rem;
            color: #ff3e78;
            display: block;
            text-align: right;
            margin-top: 30px;
            margin-right: 20px;
        }

        /* Improved letter readability on mobile */
        @media (max-width: 768px) {
            .letter-content h2 {
                font-size: 1.6rem;
                margin-bottom: 20px;
            }

            .letter-content p {
                font-size: 1rem;
                line-height: 1.6;
            }

            .signature {
                font-size: 1.5rem;
                margin-top: 20px;
            }
        }

        @media (max-width: 480px) {
            .letter {
                padding: 15px;
            }

            .letter-content {
                padding: 10px;
            }

            .letter-content h2 {
                font-size: 1.4rem;
                margin-bottom: 15px;
            }

            .letter-content p {
                font-size: 0.95rem;
                line-height: 1.5;
            }
        }

        /* Add a heart decoration to the letter */
        .letter::before {
            content: '';
            position: absolute;
            top: 10px;
            right: 10px;
            width: 30px;
            height: 30px;
            background: radial-gradient(#ff6491, #ff2d63);
            opacity: 0.1;
            border-radius: 50%;
            transform: rotate(45deg);
        }

        /* Make sure the envelope elements have proper z-index */
        .envelope-flap {
            z-index: 2;
        }

        .envelope {
            z-index: 1;
        }

        .letter {
            z-index: 0;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }

            .title {
                font-size: 2rem;
            }

            .cake {
                width: 160px;
                height: 100px;
            }

            .base {
                width: 140px;
                height: 65px;
            }

            .frosting {
                width: 160px;
                height: 25px;
            }

            .candles {
                top: -35px;
                gap: 12px;
            }

            .flame {
                width: 12px;
                height: 25px;
            }

            .typed-text {
                font-size: 1.1rem;
                min-height: 60px;
            }

            .section-title {
                font-size: 1.8rem;
            }

            .gallery-container {
                grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
                gap: 10px;
            }

            .gallery-item {
                aspect-ratio: 1/1.3;
            }

            .timeline-item {
                padding: 0 0 0 35px;
            }
            
            .timeline::before {
                left: 15px;
            }
            
            .timeline-item::after {
                left: 6px;
            }

            .letter-envelope {
                height: 250px;
            }
        }

        @media (max-width: 480px) {
            .title {
                font-size: 1.8rem;
            }

            .cake {
                width: 140px;
                height: 85px;
            }

            .base {
                width: 120px;
                height: 55px;
            }

            .frosting {
                width: 140px;
                height: 20px;
            }

            .candles {
                top: -30px;
                gap: 10px;
            }

            .flame {
                width: 10px;
                height: 20px;
            }

            .typed-text {
                font-size: 1rem;
                min-height: 50px;
            }

            .letter-envelope {
                height: 200px;
            }

            section {
                padding: 20px 15px;
            }
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 25px 0;
            margin-top: 30px;
            border-top: 1px solid rgba(0, 0, 0, 0.1);
        }

        .footer p {
            margin-bottom: 8px;
        }

        .heartbeat {
            color: var(--accent);
            animation: heartbeat 1.5s infinite;
        }

        .final-message {
            font-family: 'Dancing Script', cursive;
            font-size: clamp(1.5rem, 6vw, 1.8rem);
            color: var(--primary);
            margin-top: 15px;
        }

        /* Responsive */
        @media (min-width: 768px) {
            .container {
                padding: 30px;
            }

            .gallery-container {
                grid-template-columns: repeat(3, 1fr);
                gap: 20px;
            }

            .timeline::before {
                left: 50%;
                margin-left: -2px;
            }

            .timeline-item {
                width: 50%;
                padding: 0 40px;
            }

            .left {
                left: 0;
                padding-right: 20px;
            }

            .right {
                left: 50%;
                padding-left: 20px;
            }

            .left::after {
                right: -10px;
                left: auto;
            }

            .right::after {
                left: -10px;
            }

            .message-scroll {
                padding: 35px 40px;
            }
        }

        @media (min-width: 992px) {
            .gallery-container {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        /* Balloon Animations */
        .balloons-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
            overflow: hidden;
        }

        .balloon {
            position: absolute;
            width: 30px;
            height: 40px;
            background: var(--primary);
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            animation: float-balloon 15s linear infinite;
            opacity: 0.6;
            box-shadow: inset -5px -5px 15px rgba(255,255,255,0.3);
        }

        .balloon::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 50%;
            transform: translateX(-50%);
            width: 2px;
            height: 12px;
            background: rgba(255, 255, 255, 0.7);
        }

        @keyframes float-balloon {
            0% {
                transform: translate(0, 120vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 0.6;
                transform: translate(5vw, 100vh) rotate(5deg);
            }
            50% {
                transform: translate(10vw, 50vh) rotate(-5deg);
            }
            90% {
                opacity: 0.6;
                transform: translate(15vw, 10vh) rotate(5deg);
            }
            100% {
                transform: translate(20vw, -20vh) rotate(0deg);
                opacity: 0;
            }
        }

        /* Updated Animations */
        @keyframes float {
            0% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0); }
        }

        @keyframes sparkle {
            0%, 100% { opacity: 0.2; }
            50% { opacity: 1; }
        }

        /* Floating Hearts Animation */
        .floating-hearts {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            pointer-events: none;
            z-index: 0;
        }

        .heart {
            position: absolute;
            width: 15px;
            height: 15px;
            background: var(--primary);
            transform: rotate(45deg);
            opacity: 0;
            animation: floatHeart 10s linear infinite;
        }

        .heart::before,
        .heart::after {
            content: '';
            position: absolute;
            width: 15px;
            height: 15px;
            background: var(--primary);
            border-radius: 50%;
        }

        .heart::before {
            top: -7.5px;
            left: 0;
        }

        .heart::after {
            top: 0;
            left: -7.5px;
        }

        @keyframes floatHeart {
            0% {
                transform: translateY(100vh) translateX(0) rotate(45deg) scale(1);
                opacity: 0;
            }
            10% {
                opacity: 0.6;
            }
            90% {
                opacity: 0.6;
            }
            100% {
                transform: translateY(-20vh) translateX(20vw) rotate(45deg) scale(0.5);
                opacity: 0;
            }
        }

        /* Enhanced Hero Section */
        .hero-message {
            margin-top: 25px;
            background: rgba(255, 255, 255, 0.7);
            padding: 20px;
            border-radius: 15px;
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.7);
        }

        .hero-message::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(to right, var(--primary), var(--accent));
            opacity: 0.7;
        }

        .typed-text {
            font-size: 1.5rem;
            color: var(--accent);
            font-family: 'Dancing Script', cursive;
            min-height: 80px;
            line-height: 1.8;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        }

        /* Make the cake animation better */
        @keyframes flicker {
            0%, 100% { 
                transform: scale(1);
                opacity: 1;
                box-shadow: 0 0 15px #ff9800, 0 0 30px rgba(255, 152, 0, 0.5);
            }
            25% { 
                transform: scale(1.1) translateY(-1px);
                opacity: 0.8;
                box-shadow: 0 0 20px #ff9800, 0 0 40px rgba(255, 152, 0, 0.7);
            }
            50% { 
                transform: scale(0.9);
                opacity: 1;
                box-shadow: 0 0 10px #ff9800, 0 0 20px rgba(255, 152, 0, 0.4);
            }
            75% { 
                transform: scale(1.05) translateY(-2px);
                opacity: 0.9;
                box-shadow: 0 0 25px #ff9800, 0 0 45px rgba(255, 152, 0, 0.6);
            }
        }

        /* Improved Gallery Layout */
        .gallery-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
            animation: fadeIn 1s ease;
        }
        
        .gallery-cascade {
            opacity: 0;
            transform: translateY(30px);
            animation: fadeInUp 0.8s forwards;
            animation-delay: calc(var(--order) * 0.2s);
        }
        
        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* Centered Cake Section */
        .cake-section {
            text-align: center;
            padding: 30px 0;
            margin: 40px auto;
            max-width: 800px;
            background: rgba(255, 255, 255, 0.85);
            border-radius: 20px;
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
        }
        
        .cake-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(to right, var(--primary), var(--accent));
        }
        
        .cake-title {
            font-family: 'Dancing Script', cursive;
            font-size: 2.2rem;
            color: var(--accent);
            margin-bottom: 30px;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
        }

        /* Hearts background */
        .hearts-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
            overflow: hidden;
        }
        
        .floating-heart {
            position: absolute;
            background: var(--primary);
            width: 20px;
            height: 20px;
            transform: rotate(45deg);
            opacity: 0.1;
            animation: floatingHeart 15s linear infinite;
        }
        
        .floating-heart::before,
        .floating-heart::after {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            background: inherit;
            border-radius: 50%;
        }
        
        .floating-heart::before {
            top: -10px;
            left: 0;
        }
        
        .floating-heart::after {
            top: 0;
            left: -10px;
        }
        
        @keyframes floatingHeart {
            0% {
                transform: translateY(100vh) translateX(0) rotate(45deg);
                opacity: 0;
            }
            10% {
                opacity: 0.1;
            }
            90% {
                opacity: 0.1;
            }
            100% {
                transform: translateY(-20vh) translateX(40px) rotate(45deg);
                opacity: 0;
            }
        }

        /* Prevent click events from reaching envelope when scrolling */
        .envelope-wrapper.open .letter-content {
            pointer-events: auto;
        }

        /* Wrapper for the content to capture scrolling */
        .scroll-wrapper {
            position: absolute;
            inset: 0;
            z-index: 55;
            pointer-events: none; /* Don't interfere with initial click */
        }

        .letter-envelope.open .scroll-wrapper {
            pointer-events: auto; /* Capture events after opening */
        }

        /* Romantic Wish Section */
        .wish-section {
            text-align: center;
            padding: 40px 20px;
            margin: 50px auto;
            max-width: 850px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(255, 240, 245, 0.9));
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(255, 62, 120, 0.2);
            position: relative;
            overflow: hidden;
        }

        .wish-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 6px;
            background: linear-gradient(to right, var(--primary), var(--accent));
            border-radius: 6px 6px 0 0;
        }

        .wish-title {
            font-family: 'Dancing Script', cursive;
            font-size: 2.5rem;
            color: var(--accent);
            margin-bottom: 25px;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
        }

        .wish-cake-container {
            position: relative;
            width: 180px;
            height: 150px;
            margin: 20px auto 30px;
            filter: drop-shadow(0 10px 15px rgba(0, 0, 0, 0.1));
        }

        .wish-cake {
            position: relative;
            width: 100%;
            height: 100%;
        }

        .wish-cake-base {
            position: absolute;
            bottom: 0;
            left: 10px;
            width: 160px;
            height: 70px;
            background: linear-gradient(to bottom, #ff9bb2, #ff6686);
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(255, 31, 90, 0.2);
        }

        .wish-cake-middle {
            position: absolute;
            bottom: 70px;
            left: 20px;
            width: 140px;
            height: 30px;
            background: linear-gradient(to bottom, #ffb8c9, #ff9bb2);
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(255, 31, 90, 0.15);
        }

        .wish-cake-top {
            position: absolute;
            bottom: 100px;
            left: 30px;
            width: 120px;
            height: 25px;
            background: linear-gradient(to bottom, #ffd6e7, #ffb8c9);
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(255, 31, 90, 0.1);
        }

        .wish-cake-frosting {
            position: absolute;
            bottom: 125px;
            left: 25px;
            width: 130px;
            height: 10px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 -2px 5px rgba(255, 31, 90, 0.05);
        }

        .wish-cake-candles {
            position: absolute;
            bottom: 135px;
            display: flex;
            justify-content: space-around;
            width: 120px;
            left: 30px;
        }

        .wish-cake-candle {
            width: 5px;
            height: 25px;
            background: linear-gradient(to right, #a5d6a7, #66bb6a);
            border-radius: 2px;
            position: relative;
            z-index: 1;
        }

        .wish-cake-flame {
            position: absolute;
            top: -15px;
            left: -5px;
            width: 15px;
            height: 15px;
            background: linear-gradient(to top, #ffeb3b, #ff9800);
            border-radius: 50% 50% 20% 20%;
            animation: flicker 1.5s infinite alternate;
            filter: blur(0.5px);
            box-shadow: 0 0 10px #ff9800, 0 0 15px rgba(255, 152, 0, 0.5);
            z-index: 2;
        }

        .wish-cake-decoration {
            position: absolute;
            width: 10px;
            height: 10px;
            background: white;
            border-radius: 50%;
            box-shadow: inset 0 0 3px rgba(255, 31, 90, 0.3);
        }

        /* Position decorations */
        .wish-cake-decoration:nth-child(1) { top: 10px; left: 20px; background: #ffec99; }
        .wish-cake-decoration:nth-child(2) { top: 25px; left: 50px; background: #ffb0cd; }
        .wish-cake-decoration:nth-child(3) { top: 10px; right: 20px; background: #c5e1f5; }
        .wish-cake-decoration:nth-child(4) { top: 25px; right: 50px; background: #ffec99; }

        .wish-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin-top: 20px;
            position: relative;
        }

        .wish-box {
            background: white;
            border-radius: 20px;
            padding: 30px;
            max-width: 600px;
            width: 100%;
            box-shadow: 0 10px 25px rgba(255, 62, 120, 0.15);
            margin-bottom: 30px;
            transform: translateY(20px);
            opacity: 0;
            transition: all 0.5s ease;
            position: relative;
        }

        .wish-box.revealed {
            transform: translateY(0);
            opacity: 1;
        }

        .wish-text {
            font-family: 'Dancing Script', cursive;
            font-size: 1.4rem;
            line-height: 1.8;
            color: var(--text);
            margin-bottom: 20px;
            text-align: center;
        }

        .special-wish {
            font-weight: bold;
            color: var(--accent);
            font-size: 1.6rem;
            margin-top: 20px;
            opacity: 0;
            transform: scale(0.8);
            transition: all 0.6s ease 0.3s;
        }

        .wish-box.revealed .special-wish {
            opacity: 1;
            transform: scale(1);
        }

        .wish-button {
            background: linear-gradient(to right, var(--primary), var(--accent));
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 1.1rem;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(255, 62, 120, 0.3);
            margin-top: 10px;
            position: relative;
            overflow: hidden;
            z-index: 1;
        }

        .wish-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(to right, var(--accent), var(--primary));
            transition: all 0.4s ease;
            z-index: -1;
        }

        .wish-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 62, 120, 0.4);
        }

        .wish-button:hover::before {
            left: 0;
        }

        .wish-animation {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            pointer-events: none;
            z-index: 10;
            display: none;
        }

        .wish-animation.active {
            display: block;
        }

        .falling-confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background: var(--primary);
            border-radius: 2px;
            animation: fall 5s linear forwards;
        }

        @keyframes fall {
            0% {
                transform: translateY(-100px) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(1000px) rotate(360deg);
                opacity: 0;
            }
        }

        .floating-stars {
            position: absolute;
            width: 15px;
            height: 15px;
            background: gold;
            clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
            animation: float-star 4s ease-in-out infinite alternate;
        }

        @keyframes float-star {
            0% {
                transform: translateY(0) rotate(0deg) scale(1);
                opacity: 0.8;
            }
            100% {
                transform: translateY(-50px) rotate(45deg) scale(0.8);
                opacity: 0;
            }
        }

        @media (max-width: 768px) {
            .wish-title {
                font-size: 2rem;
            }
            
            .wish-text {
                font-size: 1.2rem;
            }
            
            .special-wish {
                font-size: 1.4rem;
            }
            
            .wish-box {
                padding: 20px;
            }
        }

        /* Enhanced Opening Section */
        .opening-section {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.92), rgba(255, 240, 245, 0.92));
            border-radius: 20px;
            padding: 40px 30px;
            margin: 20px auto 50px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 15px 35px rgba(255, 62, 120, 0.2);
            text-align: center;
            max-width: 900px;
        }

        .opening-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
            background: linear-gradient(to right, var(--primary), var(--accent));
            border-radius: 6px 6px 0 0;
        }

        .opening-title {
            font-family: 'Dancing Script', cursive;
            font-size: 3.2rem;
            color: var(--accent);
            margin-bottom: 15px;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
        }

        .opening-subtitle {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.3rem;
            color: var(--text);
            margin-bottom: 25px;
            font-weight: 500;
        }

        .date-display {
            display: inline-block;
            background: linear-gradient(to right, var(--primary), var(--accent));
            color: white;
            padding: 12px 30px;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: 600;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(255, 62, 120, 0.3);
            position: relative;
            overflow: hidden;
        }

        .date-display::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, 
                rgba(255, 255, 255, 0) 0%, 
                rgba(255, 255, 255, 0.2) 50%, 
                rgba(255, 255, 255, 0) 100%);
            transform: translateX(-100%);
            animation: shimmer 3s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .opening-image {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            margin: 20px auto;
            border: 5px solid white;
            box-shadow: 0 5px 15px rgba(255, 31, 90, 0.2);
            overflow: hidden;
            position: relative;
        }

        .opening-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .opening-image:hover img {
            transform: scale(1.1);
        }

        .opening-message {
            font-family: 'Dancing Script', cursive;
            font-size: 1.6rem;
            color: var(--accent);
            margin: 25px 0;
            line-height: 1.6;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
        }

        .decorative-heart {
            position: absolute;
            width: 40px;
            height: 40px;
            opacity: 0.1;
            z-index: -1;
        }

        .decorative-heart::before,
        .decorative-heart::after {
            content: '';
            position: absolute;
            width: 40px;
            height: 40px;
            background: var(--primary);
            border-radius: 50%;
        }

        .decorative-heart::before {
            top: 0;
            left: 20px;
        }

        .decorative-heart::after {
            top: 20px;
            left: 0;
        }

        .decorative-heart:nth-child(1) { top: 20px; left: 20px; transform: rotate(30deg); }
        .decorative-heart:nth-child(2) { top: 70px; right: 40px; transform: rotate(-15deg); }
        .decorative-heart:nth-child(3) { bottom: 40px; left: 50px; transform: rotate(45deg); }
        .decorative-heart:nth-child(4) { bottom: 70px; right: 80px; transform: rotate(-30deg); }

        @media (max-width: 768px) {
            .opening-title {
                font-size: 2.5rem;
            }
            
            .opening-subtitle {
                font-size: 1.1rem;
            }
            
            .date-display {
                font-size: 1rem;
                padding: 10px 25px;
            }
            
            .opening-message {
                font-size: 1.3rem;
            }
        }

        /* Additional Floating Hearts Animation */
        .floating-hearts-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
            overflow: hidden;
        }
        
        .floating-heart-animation {
            position: absolute;
            width: 20px;
            height: 20px;
            background: var(--primary);
            transform: rotate(45deg);
            opacity: 0;
            animation: floatingHeartAnimation 15s linear infinite;
        }
        
        .floating-heart-animation::before,
        .floating-heart-animation::after {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            background: inherit;
            border-radius: 50%;
        }
        
        .floating-heart-animation::before {
            top: -10px;
            left: 0;
        }
        
        .floating-heart-animation::after {
            top: 0;
            left: -10px;
        }
        
        .floating-heart-animation:nth-child(even) {
            animation-duration: 20s;
        }
        
        .floating-heart-animation:nth-child(3n) {
            animation-duration: 25s;
        }
        
        .floating-heart-animation:nth-child(5n) {
            animation-duration: 18s;
        }
        
        @keyframes floatingHeartAnimation {
            0% {
                transform: translateY(100vh) translateX(0) rotate(45deg) scale(1);
                opacity: 0;
            }
            10% {
                opacity: 0.4;
            }
            50% {
                transform: translateY(50vh) translateX(var(--random-x, 10vw)) rotate(180deg) scale(0.8);
            }
            90% {
                opacity: 0.3;
            }
            100% {
                transform: translateY(-20vh) translateX(var(--random-x, 20vw)) rotate(360deg) scale(0.5);
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <div class="loading-screen" id="loadingScreen">
        <div class="loader">
            <div class="heart-pulse">
                <div class="heart-shape"></div>
            </div>
            <p>Preparing something special...</p>
        </div>
    </div>

    <div class="balloons-container"></div>
    <div class="floating-hearts-container" id="floatingHeartsContainer"></div>

    <div class="container" id="mainContainer">
        <header class="header">
            <h1 class="title">Happy Birthday, <span id="namePlaceholder">Samruddhi</span>!</h1>
            <div class="date-badge" id="currentDate"></div>
            <!-- Music control removed -->
        </header>

        <main class="main-content">
            <!-- New Enhanced Opening Section -->
            <section class="opening-section">
                <div class="decorative-heart"></div>
                <div class="decorative-heart"></div>
                <div class="decorative-heart"></div>
                <div class="decorative-heart"></div>
                
                <h1 class="opening-title">Happy Birthday Samruddhi!</h1>
                <p class="opening-subtitle">Celebrating the most wonderful person in my life</p>
                
                <div class="date-display">
                    <i class="fas fa-calendar-heart"></i> April 2nd
                        </div>
                
                <div class="opening-image">
                    <img src="images/het1.jpg" alt="Samruddhi" onerror="this.src='https://images.unsplash.com/photo-1469460340997-2d9d4b5e42a9?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80'; this.onerror=null;">
                    </div>
                
                <p class="opening-message">
                    Today is all about celebrating you and the incredible joy you bring to my life every single day!
                </p>
            </section>

            <section class="hero-section">
                <div class="floating-hearts" id="floatingHearts"></div>
                <div class="hero-message">
                    <p class="typed-text" id="typedText"></p>
                </div>
            </section>

            <section class="memory-lane">
                <h2><i class="fas fa-heart"></i> Our Beautiful Moments</h2>
                <div class="timeline" id="timelineContainer"></div>
            </section>

            

            <section class="photo-gallery">
                <h2><i class="fas fa-images"></i> Cuteness Overloaded</h2>
                <div class="gallery-container" id="galleryContainer"></div>
            </section>

            <!-- Letter Section with improved scrolling -->
            <section id="letter" class="feelings-section">
                <h2 class="section-title">My Feelings for You 💌</h2>
                <div class="letter-container">
                    <div class="letter-envelope" id="letterEnvelope">
                        <button class="envelope-button" id="envelopeButton" aria-label="Open letter"></button>
                        <div class="envelope"></div>
                        <div class="envelope-flap"></div>
                        <div class="letter">
                            <div class="scroll-wrapper" id="scrollWrapper"></div>
                            <div class="letter-content" id="letterContent">
                                <h2>To My Dearest Samruddhi 💖</h2>
                                <p>
                                    Wrapped in the hues of love, you look like a dream woven in silk and sunshine. The way the wind plays with your hair, the sparkle in your eyes, and the grace in your stance—it's all poetry without words.
                                </p>
                                <p>
                                    If beauty had a language, it would whisper your name in the softest tones. Every time I see you, my heart skips a beat, and I realize once again how lucky I am to witness such breathtaking magic.
                                </p>
                                <p>
                                    You've brought colors to my life I never knew existed. Your laughter is the sweetest melody, and your presence makes even ordinary moments extraordinary. Each day with you feels like a beautiful dream I never want to wake up from.
                                </p>
                                <p>
                                    There are countless reasons why my heart chose you - your kindness, your intelligence, your strength, and the way you see the world with such beautiful perspective. You inspire me to be better every single day.
                                </p>
                                <p class="extra-content">
                                    Would you make me the happiest person and be mine?
                                </p>
                                <p>
                                    With all my heart,<br>
                                    <span class="signature">Het ❤️</span>
                                </p>
                    </div>
                        </div>
                    </div>
                    <p class="letter-instruction">Tap the envelope to open my heart 💌</p>
                </div>
            </section>

            <!-- Enhanced Birthday Wish Section -->
            <section class="wish-section">
                <h2 class="wish-title">My Birthday Wish For You 💫</h2>
                
                <div class="wish-cake-container">
                    <div class="wish-cake">
                        <div class="wish-cake-base">
                            <div class="wish-cake-decoration"></div>
                            <div class="wish-cake-decoration"></div>
                            <div class="wish-cake-decoration"></div>
                            <div class="wish-cake-decoration"></div>
                        </div>
                        <div class="wish-cake-middle"></div>
                        <div class="wish-cake-top"></div>
                        <div class="wish-cake-frosting"></div>
                        <div class="wish-cake-candles">
                            <div class="wish-cake-candle">
                                <div class="wish-cake-flame"></div>
                            </div>
                            <div class="wish-cake-candle">
                                <div class="wish-cake-flame"></div>
                            </div>
                            <div class="wish-cake-candle">
                                <div class="wish-cake-flame"></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="wish-container">
                    <div class="wish-box" id="wishBox">
                        <p class="wish-text">On this special day, I wish you a life filled with all the happiness your heart can hold.</p>
                        <p class="wish-text">May each moment bring you joy, each hour bring you peace, and each day bring you closer to your dreams.</p>
                        <p class="special-wish">I wish to be the reason behind your smile every day! ❤️</p>
                    </div>
                    
                    <button class="wish-button" id="makeWishBtn">
                        <i class="fas fa-magic"></i> Make Your Birthday Special
                    </button>
                    
                    <div class="wish-animation" id="wishAnimation"></div>
                </div>
            </section>

        </main>

        <footer class="footer">
            <p>Created with <i class="fas fa-heart heartbeat"></i> just for you</p>
            <p class="final-message">You make every day worth celebrating!</p>
        </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.12"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Elements
            const loadingScreen = document.getElementById('loadingScreen');
            const mainContainer = document.getElementById('mainContainer');
            const musicBtn = document.getElementById('musicBtn');
            const bgMusic = document.getElementById('bgMusic');
            const wishBtn = document.getElementById('wishBtn');
            const typedTextElement = document.getElementById('typedText');
            const timelineContainer = document.getElementById('timelineContainer');
            const galleryContainer = document.getElementById('galleryContainer');
            const messageScroll = document.getElementById('messageScroll');
            const viewMoreBtn = document.getElementById('viewMoreBtn');
            const currentDateElement = document.getElementById('currentDate');
            const namePlaceholder = document.getElementById('namePlaceholder');
            const letterEnvelope = document.getElementById('letterEnvelope');
            const envelopeButton = document.getElementById('envelopeButton');

            // Data
            const memories = [
                {
                    title: "When We First Met",
                    content: "I'll never forget how the room lit up when you walked in. Your smile was the most beautiful thing I'd ever seen.",
                    date: "February 24, 2024",
                    icon: "fas fa-heart"
                },
                {
                    title: "Our First Conversation",
                    content: "We talked for hours like we'd known each other forever. I knew then you were someone special.",
                    date: "February 24, 2024",
                    icon: "fas fa-comments"
                },
                {
                    title: "That Time You Made Me Laugh",
                    content: "Your sense of humor is one of my favorite things about you. That day we couldn't stop laughing was magical.",
                    date: "February 26, 2024",
                    icon: "fas fa-laugh-squint"
                }
            ];

            const additionalMemories = [
                {
                    title: "Your Thoughtful Gesture",
                    content: "When you did that sweet thing just because you knew it would make me happy.",
                    date: "August 10, 2022",
                    icon: "fas fa-gift"
                },
                {
                    title: "Our Shared Moment",
                    content: "That time we both noticed the same little detail and smiled at each other without saying a word.",
                    date: "September 5, 2022",
                    icon: "fas fa-eye"
                },
                {
                    title: "When You Inspired Me",
                    content: "You have this amazing way of seeing the world that makes me want to be better.",
                    date: "October 18, 2022",
                    icon: "fas fa-lightbulb"
                }
            ];

            const galleryItems = [
                {
                    image: "images/het7.jpg",
                    caption: "Every moment with you is magical"
                },
                {
                    image: "images/het2.jpg",
                    caption: "Your smile brightens my world"
                },
                {
                    image: "images/het3.jpg",
                    caption: "You are the most beautiful girl in the world"
                },
                {
                    image: "images/het4.jpg",
                    caption: "Lost in your eyes"
                },
                {
                    image: "images/het5.jpg",
                    caption: "My heart belongs to you"
                },
                {
                    image: "images/het6.jpg",
                    caption: "Forever and always with you"
                }
            ];

            const messageContent = [
                "My Dearest Love,",
                "From the moment I first saw you, my heart knew what my mind would soon discover - that you are the one I want to share all my tomorrows with.",
                "Your smile brightens my darkest days, and your laugh is the sweetest melody I've ever heard. Every moment with you feels like a dream I never want to wake up from.",
                "I find myself falling deeper in love with you each day. Will you be mine?",
                "Forever Yours,",
                "<span class='signature'>❤️</span>"
            ];

            const typedMessages = [
                "Your smile brightens my darkest days... ✨",
                "Every moment with you feels magical... 💫",
                "You are the reason my heart skips a beat... 💓",
                "I'm falling more in love with you each day... 💝",
                "You make my world more beautiful... 🌹",
                "My heart belongs to you forever... ❤️"
            ];

            // Initialize
            setTimeout(() => {
                loadingScreen.style.opacity = '0';
                setTimeout(() => {
                    loadingScreen.style.display = 'none';
                    mainContainer.style.opacity = '1';
                    initApp();
                }, 800);
            }, 2000);

            function initApp() {
                personalizeFromURL();
                updateCurrentDate();
                initTypedJS();
                loadMemories();
                loadGallery();
                loadMessage();
                setupEventListeners();
                createFloatingHearts();
                createBackgroundHearts();
                createFloatingHeartAnimations(); // Add the new floating hearts
            }

            function personalizeFromURL() {
                const urlParams = new URLSearchParams(window.location.search);
                const name = urlParams.get('name');
                if (name) {
                    namePlaceholder.textContent = name;
                    messageContent[0] = `My Dearest ${name},`;
                }
            }

            function updateCurrentDate() {
                const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
                currentDateElement.textContent = "April 2nd, " + new Date().getFullYear();
            }

            function initTypedJS() {
                new Typed('#typedText', {
                    strings: typedMessages,
                    typeSpeed: 60,
                    backSpeed: 30,
                    loop: true,
                    showCursor: true,
                    cursorChar: '❤️',
                    shuffle: false,
                    startDelay: 1000,
                    backDelay: 2000
                });
            }

            function loadMemories() {
                memories.forEach((memory, index) => {
                    const timelineItem = document.createElement('div');
                    timelineItem.className = `timeline-item ${index % 2 === 0 ? 'left' : 'right'}`;
                    timelineItem.innerHTML = `
                        <div class="timeline-content" style="--order: ${index}">
                            <div class="memory-header">
                                <i class="${memory.icon}"></i>
                                <h3>${memory.title}</h3>
                            </div>
                            <p>${memory.content}</p>
                            <div class="memory-date">${memory.date}</div>
                        </div>
                    `;
                    timelineContainer.appendChild(timelineItem);
                });
            }

            function loadGallery() {
                galleryContainer.innerHTML = '';
                galleryItems.forEach((item, index) => {
                    const galleryItem = document.createElement('div');
                    galleryItem.className = 'gallery-item gallery-cascade';
                    galleryItem.style.setProperty('--order', index);
                    galleryItem.innerHTML = `
                        <img src="${item.image}" alt="${item.caption}" loading="lazy">
                        <div class="overlay">
                            <div class="overlay-caption">${item.caption}</div>
                        </div>
                    `;
                    galleryContainer.appendChild(galleryItem);
                });
            }

            function loadMessage() {
                const messageContent = document.querySelector('.message-content');
                messageContent.innerHTML = '';
                messageContent.innerHTML = messageContent.map(paragraph => `<p>${paragraph}</p>`).join('');
            }

            function createFloatingHearts() {
                const heartsContainer = document.getElementById('floatingHearts');
                const colors = [
                    '#ff3e78', '#ff86a0', '#ff1f59', '#ffcd3c', '#ff9eb5'
                ];
                
                for (let i = 0; i < 20; i++) {
                    const heart = document.createElement('div');
                    heart.className = 'heart';
                    heart.style.left = `${Math.random() * 100}%`;
                    heart.style.animationDelay = `${Math.random() * 10}s`;
                    heart.style.background = colors[Math.floor(Math.random() * colors.length)];
                    heart.style.opacity = (Math.random() * 0.5) + 0.1;
                    
                    // Add same size to before/after
                    const size = 10 + Math.random() * 15;
                    heart.style.width = `${size}px`;
                    heart.style.height = `${size}px`;
                    
                    heartsContainer.appendChild(heart);
                }
            }

            function createBackgroundHearts() {
                const container = document.getElementById('heartsBg');
                const colors = [
                    '#ff3e78', '#ff86a0', '#ff1f59', '#ffcd3c', '#ff9eb5'
                ];
                
                for (let i = 0; i < 30; i++) {
                    const heart = document.createElement('div');
                    heart.className = 'floating-heart';
                    heart.style.left = `${Math.random() * 100}%`;
                    heart.style.animationDelay = `${Math.random() * 15}s`;
                    heart.style.background = colors[Math.floor(Math.random() * colors.length)];
                    
                    const size = 5 + Math.random() * 20;
                    heart.style.width = `${size}px`;
                    heart.style.height = `${size}px`;
                    
                    container.appendChild(heart);
                }
                
                // Add new hearts periodically
                setInterval(() => {
                    if (container.children.length < 50) {
                        const heart = document.createElement('div');
                        heart.className = 'floating-heart';
                        heart.style.left = `${Math.random() * 100}%`;
                        heart.style.background = colors[Math.floor(Math.random() * colors.length)];
                        
                        const size = 5 + Math.random() * 20;
                        heart.style.width = `${size}px`;
                        heart.style.height = `${size}px`;
                        
                        container.appendChild(heart);
                        
                        // Remove after animation completes
                        setTimeout(() => {
                            heart.remove();
                        }, 15000);
                    }
                }, 2000);
            }

            function revealMessage() {
                const envelopeWrapper = document.querySelector('.envelope-wrapper');
                if (!envelopeWrapper.classList.contains('opened')) {
                    envelopeWrapper.classList.add('opened');
                    setTimeout(() => {
                        document.querySelector('.message-scroll').style.opacity = '1';
                        document.querySelector('.message-scroll').style.transform = 'translateY(0)';
                    }, 400);
                }
            }

            function setupEventListeners() {
                // Music control removed

                // Add hover effects to gallery items
                document.querySelectorAll('.gallery-item').forEach(item => {
                    item.addEventListener('mouseenter', function() {
                        this.style.transform = 'scale(1.02) translateY(-5px)';
                    });
                    item.addEventListener('mouseleave', function() {
                        this.style.transform = 'scale(1) translateY(0)';
                    });
                });

                // Add smooth scroll for navigation
                document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                    anchor.addEventListener('click', function (e) {
                        e.preventDefault();
                        document.querySelector(this.getAttribute('href')).scrollIntoView({
                            behavior: 'smooth'
                        });
                    });
                });

                // Letter touch/click handling
                if (envelopeButton) {
                    envelopeButton.addEventListener('click', function() {
                        letterEnvelope.classList.toggle('open');
                    });
                }

                // Wish button
                const makeWishBtn = document.getElementById('makeWishBtn');
                if (makeWishBtn) {
                    makeWishBtn.addEventListener('click', function() {
                        // Reveal the wish
                        wishBox.classList.add('revealed');
                        
                        // Update button text
                        this.innerHTML = '<i class="fas fa-heart"></i> Happy Birthday!';
                        this.style.background = 'linear-gradient(to right, #FF6B95, #FF3E78)';
                        
                        // Create celebration animation
                        createCelebrationEffects();
                        
                        // Disable button after click
                        setTimeout(() => {
                            this.disabled = true;
                        }, 100);
                    });
                }
            }

            function animateCake() {
                const flames = document.querySelectorAll('.flame');
                flames.forEach(flame => {
                    flame.style.animation = 'flicker 0.3s infinite alternate';
                    flame.style.height = '35px';
                    flame.style.width = '20px';
                    flame.style.boxShadow = '0 0 30px #ff9800, 0 0 50px rgba(255, 152, 0, 0.7)';
                });
                
                setTimeout(() => {
                    flames.forEach(flame => {
                        flame.style.animation = '';
                        flame.style.height = '';
                        flame.style.width = '';
                        flame.style.boxShadow = '';
                        flame.style.opacity = '0';
                        flame.style.transform = 'scale(0)';
                        flame.style.transition = 'all 0.5s ease';
                    });
                }, 2000);
            }

            // Make sure envelope works and doesn't close once opened
            if (envelopeButton) {
                // Clean direct click handler
                envelopeButton.onclick = function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    
                    // Only toggle open if it's not already open
                    if (!letterEnvelope.classList.contains('open')) {
                        letterEnvelope.classList.add('open');
                        
                        // Focus the letter content for better scrolling 
                        if (letterContent) {
                            setTimeout(() => {
                                letterContent.focus();
                                
                                // Enable scrolling explicitly
                                letterContent.style.pointerEvents = 'auto';
                                letterContent.style.overflowY = 'auto';
                                letterContent.setAttribute('tabindex', '0');
                            }, 1000); // Wait for animation to complete
                        }
                    }
                };
                
                // Touch handler - don't close once opened
                envelopeButton.addEventListener('touchstart', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                }, {passive: false});
                
                envelopeButton.addEventListener('touchend', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    
                    // Only toggle open if it's not already open
                    if (!letterEnvelope.classList.contains('open')) {
                        letterEnvelope.classList.add('open');
                        
                        // Focus the letter content for better scrolling
                        if (letterContent) {
                            setTimeout(() => {
                                letterContent.focus();
                                
                                // Enable scrolling explicitly
                                letterContent.style.pointerEvents = 'auto';
                                letterContent.style.overflowY = 'auto';
                                letterContent.setAttribute('tabindex', '0');
                            }, 1000); // Wait for animation to complete
                        }
                    }
                }, {passive: false});
                
                // Add transition end handler to the envelope
                letterEnvelope.addEventListener('transitionend', function() {
                    if (this.classList.contains('open')) {
                        // Ensure the letter content is scrollable after animation
                        if (letterContent) {
                            letterContent.style.pointerEvents = 'auto';
                            letterContent.style.overflowY = 'auto';
                            letterContent.setAttribute('tabindex', '0');
                        }
                    } else {
                        // Reset when closed
                        if (letterContent) {
                            letterContent.style.pointerEvents = '';
                            letterContent.removeAttribute('tabindex');
                        }
                    }
                });
            }

            // After DOM is fully loaded, make sure envelope works
            window.addEventListener('load', function() {
                if (envelopeButton && letterEnvelope) {
                    // Verify the letter content element again
                    const letterContent = document.getElementById('letterContent');
                    
                    // Enable proper scrolling in the letter
                    if (letterContent) {
                        // Stop propagation for all touch events to allow scrolling
                        letterContent.addEventListener('touchstart', function(e) {
                            if (letterEnvelope.classList.contains('open')) {
                                e.stopPropagation();
                            }
                        }, { passive: true });
                        
                        letterContent.addEventListener('touchmove', function(e) {
                            if (letterEnvelope.classList.contains('open')) {
                                e.stopPropagation();
                            }
                        }, { passive: true });
                        
                        letterContent.addEventListener('touchend', function(e) {
                            if (letterEnvelope.classList.contains('open')) {
                                e.stopPropagation();
                            }
                        }, { passive: true });
                        
                        // Stop propagation for click events
                        letterContent.addEventListener('click', function(e) {
                            if (letterEnvelope.classList.contains('open')) {
                                e.stopPropagation();
                            }
                        });
                        
                        // Allow mousewheel scrolling
                        letterContent.addEventListener('wheel', function(e) {
                            if (letterEnvelope.classList.contains('open')) {
                                e.stopPropagation();
                            }
                        });
                    }
                }
            });
            
            // Wish button animation and effects
            const makeWishBtn = document.getElementById('makeWishBtn');
            const wishBox = document.getElementById('wishBox');
            const wishAnimation = document.getElementById('wishAnimation');
            
            if (makeWishBtn) {
                makeWishBtn.addEventListener('click', function() {
                    // Reveal the wish
                    wishBox.classList.add('revealed');
                    
                    // Update button text
                    this.innerHTML = '<i class="fas fa-heart"></i> Happy Birthday!';
                    this.style.background = 'linear-gradient(to right, #FF6B95, #FF3E78)';
                    
                    // Create celebration animation
                    createCelebrationEffects();
                    
                    // Disable button after click
                    setTimeout(() => {
                        this.disabled = true;
                    }, 100);
                });
            }
            
            function createCelebrationEffects() {
                // Activate animation container
                wishAnimation.classList.add('active');
                
                // Create confetti
                for (let i = 0; i < 50; i++) {
                    const confetti = document.createElement('div');
                    confetti.className = 'falling-confetti';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.top = '-20px';
                    confetti.style.animationDelay = Math.random() * 3 + 's';
                    confetti.style.backgroundColor = getRandomColor();
                    wishAnimation.appendChild(confetti);
                }
                
                // Create stars
                for (let i = 0; i < 20; i++) {
                    const star = document.createElement('div');
                    star.className = 'floating-stars';
                    star.style.left = Math.random() * 100 + '%';
                    star.style.top = Math.random() * 100 + '%';
                    star.style.animationDelay = Math.random() * 2 + 's';
                    wishAnimation.appendChild(star);
                }
                
                // Remove animation elements after they're done
                setTimeout(() => {
                    wishAnimation.innerHTML = '';
                    wishAnimation.classList.remove('active');
                }, 6000);
            }
            
            function getRandomColor() {
                const colors = ['#ff3e78', '#ff86a0', '#ff1f59', '#ffcd3c', '#ff9eb5'];
                return colors[Math.floor(Math.random() * colors.length)];
            }

            // Create additional floating hearts animation across the screen
            function createFloatingHeartAnimations() {
                const heartsContainer = document.getElementById('floatingHeartsContainer');
                const colors = [
                    '#ff3e78', '#ff86a0', '#ff1f59', '#ffcd3c', '#ff9eb5', '#ff477e', '#ff6491'
                ];
                
                // Create more hearts for a fuller animation
                for (let i = 0; i < 40; i++) {
                    const heart = document.createElement('div');
                    heart.className = 'floating-heart-animation';
                    
                    // Set random positions, sizes and colors
                    heart.style.left = `${Math.random() * 100}%`;
                    heart.style.animationDelay = `${Math.random() * 15}s`;
                    heart.style.opacity = `${Math.random() * 0.3 + 0.1}`;
                    
                    const size = 5 + Math.random() * 25;
                    heart.style.width = `${size}px`;
                    heart.style.height = `${size}px`;
                    
                    // Ensure before/after elements have same size
                    const color = colors[Math.floor(Math.random() * colors.length)];
                    heart.style.background = color;
                    
                    // Add some randomness to movement
                    const randomX = Math.random() * 40 - 20; // Range -20 to 20
                    heart.style.setProperty('--random-x', `${randomX}vw`);
                    
                    heartsContainer.appendChild(heart);
                }
            }
        });
    </script>
</body>
</html>